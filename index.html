<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Feed — fixed</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-[#071013] text-slate-200 font-sans antialiased">
  <header class="flex items-center justify-between p-4 border-b border-slate-800">
    <div class="flex items-center gap-3">
      <button id="toggleSidebar" class="px-2 py-1 rounded-md bg-slate-900/40 hover:bg-slate-900/60">☰</button>
      <h1 class="text-xl font-semibold tracking-tight">The Feed</h1>
      <span class="text-sm text-slate-400 ml-2">/ experimental</span>
    </div>
    <nav class="flex items-center gap-3">
      <button id="openResume" class="px-3 py-1 rounded-md bg-slate-900/40 hover:bg-slate-900/60">Interactive Resume</button>
      <button class="px-3 py-1 rounded-md bg-emerald-600/20 hover:bg-emerald-600/30">Sign In</button>
    </nav>
  </header>

  <main class="flex">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 border-r border-slate-800 p-4 hidden md:block">
      <div class="mb-4 text-slate-300 font-medium">Files</div>
      <ul class="space-y-2 text-sm">
        <li data-file="home.txt" class="file p-2 rounded-md hover:bg-slate-800/50 cursor-pointer bg-slate-800/60">home.txt</li>
        <li data-file="about.txt" class="file p-2 rounded-md hover:bg-slate-800/50 cursor-pointer">about.txt</li>
        <li data-file="bot1.log" class="file p-2 rounded-md hover:bg-slate-800/50 cursor-pointer">bot1.log</li>
        <li data-file="bot2.log" class="file p-2 rounded-md hover:bg-slate-800/50 cursor-pointer">bot2.log</li>
        <li data-file="resume.cv" class="file p-2 rounded-md hover:bg-slate-800/50 cursor-pointer">resume.cv</li>
      </ul>
      <div class="mt-6 text-slate-400 text-xs">Theme: DedSec • Dark</div>
    </aside>

    <section class="flex-1 p-6">
      <!-- Console -->
      <div class="rounded-2xl shadow-md p-4 bg-gradient-to-b from-slate-900/60 to-slate-900/40">
        <div id="consoleOutput" class="h-64 md:h-72 rounded-lg overflow-auto p-3 bg-black/70 font-mono text-sm">
          <div>Welcome to The Feed. Type 'help' to begin.</div>
        </div>
        <form id="consoleForm" class="mt-3 flex items-center gap-2">
          <input id="consoleInput" placeholder="Type a command..." class="flex-1 bg-black/80 placeholder-slate-500 p-2 rounded-md font-mono outline-none" />
          <button type="submit" class="px-3 py-2 rounded-md bg-emerald-600/30 hover:bg-emerald-600/40">Run</button>
        </form>
      </div>

      <!-- File viewer -->
      <div class="mt-6 rounded-lg p-4 bg-slate-900/30 border border-slate-800">
        <div class="flex items-center justify-between">
          <div class="text-sm text-slate-300">Viewing: <span id="fileName" class="font-mono">home.txt</span></div>
          <div class="text-xs text-slate-400">Updated: Sep 20, 2025</div>
        </div>
        <div id="fileContent" class="mt-3 text-sm text-slate-200 bg-black/20 p-3 rounded-md font-mono h-36 overflow-auto">
          Welcome to The Feed.
          This virtual file is a sandbox — tinker, play, build.
          
          Commands: help, about, resume, open &lt;file&gt;, clear
        </div>
      </div>
    </section>
  </main>

  <!-- Resume Modal -->
  <div id="resumeModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60">
    <div class="w-11/12 md:w-3/5 bg-slate-900 rounded-2xl p-6 shadow-2xl">
      <div class="flex items-start justify-between">
        <h2 class="text-xl font-semibold">Interactive Resume</h2>
        <button id="closeResume" class="text-slate-400 hover:text-slate-100">✕</button>
      </div>
      <div class="mt-4">
        <h3 class="font-medium">Summary</h3>
        <p class="mt-2 text-sm text-slate-200">Forward-thinking developer, tinkerer, and creator. Loves clean UI, fast apps, and solving problems elegantly.</p>
        <p class="mt-4 text-sm">Email: <a href="mailto:chrlzs.chizl@gmail.com" class="text-emerald-400">chrlzs.chizl@gmail.com</a></p>
      </div>
    </div>
  </div>

  <footer class="p-4 text-center text-xs text-slate-500">Built with ❤️ — tweak anything. Tip: add Firebase for persistence.</footer>

  <script>
    // Grab elements (use distinct variable names to avoid accidental shadowing)
    const sidebar = document.getElementById('sidebar');
    const toggleSidebar = document.getElementById('toggleSidebar');
    const fileEls = document.querySelectorAll('.file');
    const fileName = document.getElementById('fileName');
    const fileContent = document.getElementById('fileContent');

    // Simple in-memory files
    const files = {
      'home.txt': 'Welcome to The Feed.
This virtual file is a sandbox — tinker, play, build.

Commands: help, about, resume, open <file>, clear',
      'about.txt': 'Hand-crafted site template. Dark, minimal, hacker-adjacent aesthetic.',
      'bot1.log': '[09:00] bot1: ping
[09:01] bot1: job started
[09:02] bot1: done',
      'bot2.log': '[09:00] bot2: pong
[09:01] bot2: checking
[09:02] bot2: all good',
      'resume.cv': 'Interactive resume — open the "Interactive Resume" button to explore sections.'
    };

    // Sidebar toggling
    if(toggleSidebar){
      toggleSidebar.addEventListener('click', ()=>{
        if(sidebar) sidebar.classList.toggle('hidden');
      });
    }

    // File clicks
    fileEls.forEach(el => {
      el.addEventListener('click', ()=>{
        // Clear any active marker classes from all file elements
        fileEls.forEach(f => f.classList.remove('bg-slate-800/60'));
        el.classList.add('bg-slate-800/60');

        const name = el.dataset.file;
        fileName.textContent = name;

        if(files[name]){
          // textContent is safe — it won't be parsed as HTML
          fileContent.textContent = files[name];
        } else if(name && name.endsWith('.log')){
          fileContent.textContent = 'Log stream (mock):
[09:00] bot1: ping
[09:01] bot2: pong
[09:02] system: all good';
        } else {
          fileContent.textContent = files['home.txt'];
        }
      });
    });

    // Console logic
    const consoleForm = document.getElementById('consoleForm');
    const consoleInput = document.getElementById('consoleInput');
    const consoleOutput = document.getElementById('consoleOutput');

    function addLine(text, isCommand){
      if(!consoleOutput) return;
      const div = document.createElement('div');
      div.textContent = (isCommand ? '> ' : '') + text;
      div.className = isCommand ? 'text-emerald-300' : 'text-slate-300';
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }

    if(consoleForm){
      consoleForm.addEventListener('submit', function(e){
        e.preventDefault();
        const cmd = consoleInput.value.trim();
        if(!cmd) return;
        addLine(cmd, true);
        const low = cmd.toLowerCase();
        if(low === 'help'){
          addLine('Available: help | about | resume | open <file> | clear');
        } else if(low === 'about'){
          addLine('The Feed — slick, small, fast. Built for devs and creators.');
        } else if(low === 'resume'){
          const modal = document.getElementById('resumeModal');
          if(modal) modal.classList.remove('hidden');
          addLine('Opening interactive resume...');
        } else if(low.startsWith('open ')){
          const parts = cmd.split(' ');
          const target = parts[1] || '';
          const fname = target.includes('.') ? target : (target + '.txt');
          if(files[fname]){
            fileName.textContent = fname;
            fileContent.textContent = files[fname];
            addLine('Opened ' + fname);
          } else {
            addLine('File not found: ' + fname);
          }
        } else if(low === 'clear'){
          if(consoleOutput) consoleOutput.innerHTML = '';
        } else {
          addLine('Unknown command: ' + cmd + '. Try \"help\".');
        }
        consoleInput.value = '';
      });
    }

    // Resume modal buttons
    const openResume = document.getElementById('openResume');
    const closeResume = document.getElementById('closeResume');
    if(openResume){ openResume.addEventListener('click', ()=>{ const m = document.getElementById('resumeModal'); if(m) m.classList.remove('hidden'); }); }
    if(closeResume){ closeResume.addEventListener('click', ()=>{ const m = document.getElementById('resumeModal'); if(m) m.classList.add('hidden'); }); }

    // Quick safety: focus console on backtick, close modal on Escape
    window.addEventListener('keydown', function(e){
      if(e.key === '`' && consoleInput) { consoleInput.focus(); e.preventDefault(); }
      if(e.key === 'Escape'){ const m = document.getElementById('resumeModal'); if(m) m.classList.add('hidden'); }
    });

  </script>
</body>
</html>
